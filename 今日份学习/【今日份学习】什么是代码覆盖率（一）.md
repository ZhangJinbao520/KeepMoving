<!-- title: 【今日份学习】什么是代码覆盖率（一） -->
<!-- date: 2021-10-22 13:16:30 -->
[TOC]

## 何为代码覆盖率（Code Coverage）？
- 代码覆盖率可以用来发现没有被测试覆盖的代码
- 代码覆盖率不能完全用于衡量代码质量
### 做代码覆盖率意义何在？
1. 了解测试情况，评估项目风险
2. 发现测试死角、冗余代码、废代码
3. 度量自动化用例
   通过分析代码覆盖率，反向完善自动化用例
4. 精准测试
   构建代码调用关系，精确定位测试范围，可减少不必要的资源投入
   **💬注意**：该方法不仅适用于回归阶段，其他测试阶段也适用。
* 
## 如何做代码覆盖率？
### 语句覆盖（StatementCoverage）
语句覆盖被称为`最弱覆盖`，难以发现复杂问题。</br>
度量被测代码中**每个可执行语句**是否被执行到，不包括：头文件声明（C）、代码注释、空行等，如：
```python
def add(a, b):  # 语句一
    # 这里是注释
    if a < 1 or b > 1:  # 语句二
        return 0  # 语句三
    else:  # 语句四
        return 1  # 语句五
```
> 语句覆盖又称为行覆盖(LineCoverage)、段覆盖(SegmentCoverage)、基本块覆(BasicBlockCoverage)。

### 判定覆盖（DecisionCoverage）
度量被测代码中**每个可判定分支**是否被执行到，如：
```python
def add(a, b):
    if a < 1 or b > 1:
        return 0  # 分支一
    else:
        return 1  # 分支二
```
> 判定覆盖又称为分支覆盖(BranchCoverage)、所有边界覆盖(All-EdgesCoverage)、基本路径覆盖(BasicPathCoverage)、判定路径覆盖(Decision-Decision-Path)。

### 条件覆盖（ConditionCoverage）
度量判定覆盖中**每个子表达式结果（True/False）**是否被执行到，如：
```python
def add(a, b):
    if a < 1 or b > 1:  # 子表达式
        return 0
    else:
        return 1
```
**💬注意**：判定覆盖覆盖<font color="purple">分支</font>，条件覆盖覆盖<font color="purple">表达式</font>。
> 条件覆盖值要求测试到**每个条件表达式**的结果为 True 和 False 即可，未要求测试到每个条件表达式的结果(True, False)的排列组合。

### 路径覆盖（PathCoverage）
路径覆盖被称为`最强覆盖`。</br>
度量被测代码中**函数的每个分支**是否被执行到，如：
```python
def add(a, b):
    # A 分支
    if a < 1:  # 判定
        b += 1  # A.分支一
    else:
        b += 2  # A.分支二
    # B 分支
    if b < 1:  # 判定
        return 3  # B.分支一
    else:
        return 4  # B.分支一
```
> 判定覆盖又称为断言覆盖(PredicateCoverage)。

### 循环覆盖（LoopCoverage）
度量被测代码中**每个循环体**是否被执行了零次、一次和 N 次循环。

### 函数覆盖

### 类覆盖